
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Spherical Sld | SasView Model Marketplace</title>
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" rel="stylesheet"/>
<link charset="utf-8" href="/static/marketplace/style.css" rel="stylesheet">
<link href="/static/marketplace/ball.ico" rel="shortcut icon" type="image/x-icon"/>
<script charset="utf-8" src="/static/marketplace/jquery-2.2.4.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script async="" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
</script>
<script type="text/javascript">
    $(function() {
        $('[data-toggle="tooltip"]').tooltip()
    })
    window.MathJax = ({
        elements: ["model-desc"],
        tex2jax: {
            inlineMath: [ ['$', '$'], [ "\\(", "\\)" ] ],
            processEscapes: true
        },
        asciimath2jax: {
            delimiters: [],
        },
        CommonHTML: { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
    });
</script>
</link></head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
<div class="container container-fluid">
<div class="navbar-header">
<button aria-expanded="false" class="navbar-toggle collapsed" data-target="#navbar-collapse-1" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<img src="/static/marketplace/logo.png"/><a class="navbar-brand" href="/">SasView Marketplace</a>
</div>
<div class="collapse navbar-collapse" id="navbar-collapse-1">
<ul class="nav navbar-nav navbar-right">
<li><a href="/accounts/login/"><span class="glyphicon glyphicon-log-in"></span> Log In </a></li>
</ul>
<form action="/search/" class="navbar-form navbar-left" method="get">
<div class="form-group">
<input class="form-control" name="query" placeholder="Search" type="text"/>
</div>
<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
</form>
</div><!-- /.navbar-collapse -->
</div>
</nav>
<div class="container">
<ol class="breadcrumb">
<li><a href="/">Categories</a></li>
<li><a href="/models/sphere/">Sphere</a></li>
<li><a href="/models/27/">Spherical Sld</a></li>
</ol>
<h1>Spherical Sld</h1>
<h2>Description:</h2>
<div class="container" id="model-desc">
<p>
<p>Definition </p>
<p> </p>
<p> Similarly to the onion, this model provides the form factor, $P(q)$, for a multi-shell sphere, where the interface between the each neighboring shells can be described by the error function, power-law, or exponential functions.  The scattering intensity is computed by building a continuous custom SLD profile along the radius of the particle. The SLD profile is composed of a number of uniform shells with interfacial shells between them. </p>
<p> </p>
<p>     Example SLD profile </p>
<p> Unlike the `onion` model (using an analytical integration), the interfacial shells here are sub-divided and numerically integrated assuming each sub-shell is described by a line function, with *n_steps* sub-shells per interface. The form factor is normalized by the total volume of the sphere. </p>
<p> .. note:: </p>
<p>    *n_shells* must be an integer. *n_steps* must be an ODD integer. </p>
<p> Interface shapes are as follows: </p>
<p>     0: erf($\nu z$) </p>
<p>     1: Rpow($z^\nu$) </p>
<p>     2: Lpow($z^\nu$) </p>
<p>     3: Rexp($-\nu z$) </p>
<p>     4: Lexp($-\nu z$) </p>
<p>     5: Boucher ($(1-z^2)^(\nu/2-2)$) </p>
<p> The form factor $P(q)$ in 1D is calculated by [#Feigin1987]_: </p>
<p> $$  P(q) = \frac{f^2}{V_\text{particle}} \text{ where } f = f_\text{core} + \sum_{\text{inter}_i=0}^N f_{\text{inter}_i} + \sum_{\text{flat}_i=0}^N f_{\text{flat}_i} +f_\text{solvent} <br/>$$<br/>For a spherically symmetric particle with a particle density $\rho_x(r)$ the sld function can be defined as: </p>
<p> $$  f_x = 4 \pi \int_{0}^{\infty} \rho_x(r)  \frac{\sin(qr)} {qr^2} r^2 dr <br/>$$</p>
<p> so that individual terms can be calculated as follows: </p>
<p> $$  f_\text{core} = 4 \pi \int_{0}^{r_\text{core}} \rho_\text{core} \frac{\sin(qr)} {qr} r^2 dr \\ = 3 \rho_\text{core} V(r_\text{core}) \left[ \frac{\sin(qr_\text{core}) - qr_\text{core} \cos(qr_\text{core})} {qr_\text{core}^3} \right] \\ f_{\text{inter}_i} = 4 \pi \int_{\Delta t_{ \text{inter}_i } } \rho_{ \text{inter}_i } \frac{\sin(qr)} {qr} r^2 dr \\ f_{\text{shell}_i} = 4 \pi \int_{\Delta t_{ \text{inter}_i } } \rho_{ \text{flat}_i } \frac{\sin(qr)} {qr} r^2 dr \\ = 3 \rho_{\text{flat}_i} V (r_{\text{inter}_i} + \Delta t_{\text{inter}_i}) \left[ \frac{\sin(qr_{\text{inter}_i} + \Delta t_{\text{inter}_i}) - q (r_{\text{inter}_i} + \Delta t_{ \text{inter}_i }) \cos(q(r_{\text{inter}_i} + \Delta t_{\text{inter}_i}))} {q ( r_{\text{inter}_i} + \Delta t_{\text{inter}_i} )^3 } \right] \\ quad {} - 3 \rho_{ \text{flat}_i } V (r_{\text{inter}_i}) \left[ \frac{\sin(qr_{\text{inter}_i}) - qr_{\text{flat}_i} \cos(qr_{\text{inter}_i})} {qr_{\text{inter}_i}^3} \right] \\ f_\text{solvent} = 4 \pi \int_{r_N}^{\infty} \rho_\text{solvent} \frac{\sin(qr)} {qr} r^2 dr \\ = 3 \rho_\text{solvent} V(r_N) \left[ \frac{\sin(qr_N) - qr_N \cos(qr_N)} {qr_N^3} \right] <br/>$$<br/>Here we assumed that the SLDs of the core and solvent are constant in $r$. The SLD at the interface between shells, $\rho_{\text {inter}_i}$ is calculated with a function chosen by an user, where the functions are </p>
<p> Exp: </p>
<p> $$  \rho_{{inter}_i}(r) = \begin{cases} B\, \exp\left( \frac{\pm A(r - r_{\text{flat}_i})}{\Delta t_{\text{inter}_i}} \right) + C  &amp; \mbox{for } A \neq 0 \\ B\, \left( \frac{(r - r_{\text{flat}_i})}{\Delta t_{\text{inter}_i}} \right) + C  &amp; \mbox{for } A = 0 \\ \end{cases} <br/>$$<br/>Power-Law: </p>
<p> $$  \rho_{{inter}_i}(r) = \begin{cases} \pm B\, \left( \frac{(r - r_{\text{flat}_i})}{\Delta t_{ \text{inter}_i }} \right) ^A  + C  &amp; \mbox{for } A \neq 0 \\ \rho_{\text{flat}_{i+1}}  &amp; \mbox{for } A = 0 \\ \end{cases} <br/>$$<br/>Erf: </p>
<p> $$  \rho_{{inter}_i}(r) = \begin{cases} B\, \text{erf} \left( \frac{A(r - r_{\text{flat}_i})}{\sqrt{2} \Delta t_{\text{inter}_i}} \right) + C  &amp; \mbox{for } A \neq 0 \\ B\, \left( \frac{(r - r_{\text{flat}_i})}{\Delta t_{\text{inter}_i}} \right)  +C  &amp; \mbox{for } A = 0 \\ \end{cases} <br/>$$</p>
<p> Boucher[#Boucher1983]_: </p>
<p> $$  \rho_{{inter}_i}(r) = \begin{cases} \pm B\, \left(1- (\frac{(r - r_{\text{flat}_i})}{\Delta t_{ \text{inter}_i }})^2 \right) ^(A/2-2)  + C  &amp; \mbox{for } A \neq 0 \\ \rho_{\text{flat}_{i+1}}  &amp; \mbox{for } A = 0 \\ \end{cases} <br/>$$<br/>The functions are normalized so that they vary between 0 and 1, and they are constrained such that the SLD is continuous at the boundaries of the interface as well as each sub-shell. Thus B and C are determined. </p>
<p> Once $\rho_{\text{inter}_i}$ is found at the boundary of the sub-shell of the interface, we can find its contribution to the form factor $P(q)$ </p>
<p> $$  f_{\text{inter}_i} = 4 \pi \int_{\Delta t_{\text{inter}_i} } \rho_{\text{inter}_i} \frac{\sin(qr)}{qr} r^2 dr \\ = 4 \pi \sum_{j=1}^{n_\text{steps}} \int_{r_j}^{r_{j+1}} \rho_{\text{inter}_i}(r_j) \frac{\sin(qr)}{qr} r^2 dr \\ approx 4 \pi \sum_{j=1}^{n_\text{steps}} \Biggl[ 3 (\rho_{\text{inter}_i}(r_{j+1}) - \rho_{\text{inter}_i}(r_{j})) V (r_j) \left[ \frac{r_j^2 \beta_\text{out}^2 \sin(\beta_\text{out}) - (\beta_\text{out}^2-2) \cos(\beta_\text{out})} {\beta_\text{out}^4} \right] \\ quad {} - 3 (\rho_{\text{inter}_i}(r_{j+1}) - \rho_{\text{inter}_i}(r_{j})) V(r_{j-1}) \left[ \frac{r_{j-1}^2 \sin(\beta_\text{in}) - (\beta_\text{in}^2-2) \cos(\beta_\text{in})} {\beta_\text{in}^4} \right] \\ quad {} + 3 \rho_{\text{inter}_i}(r_{j+1})  V(r_j) \left[ \frac{\sin(\beta_\text{out}) - \cos(\beta_\text{out})} {\beta_\text{out}^4} \right] \\ quad {} - 3 \rho_{\text{inter}_i}(r_{j})  V(r_j) \left[ \frac{\sin(\beta_\text{in}) - \cos(\beta_\text{in})} {\beta_\text{in}^4} \right] \Biggr] <br/>$$<br/>where </p>
<p> $$  \begin{align*} V(a) = \frac {4\pi}{3}a^3 &amp; {} &amp; {} \\ a_\text{in} sim \frac{r_j}{r_{j+1} -r_j} &amp; a_\text{out} sim \frac{r_{j+1}}{r_{j+1} -r_j} \\ \beta_\text{in} = qr_j &amp; \beta_\text{out} = qr_{j+1} \end{align*} <br/>$$<br/>We assume $\rho_{\text{inter}_j} (r)$ is approximately linear within the sub-shell $j$. </p>
<p> Finally the form factor can be calculated by </p>
<p> $$  P(q) = \frac{[f]^2} {V_\text{particle}} \mbox{ where } V_\text{particle} = V(r_{\text{shell}_N}) <br/>$$<br/>For 2D data the scattering intensity is calculated in the same way as 1D, where the $q$ vector is defined as </p>
<p> $$  q = \sqrt{q_x^2 + q_y^2} <br/>$$<br/>.. note:: </p>
<p>     The outer most radius is used as the effective radius for $S(Q)$     when $P(Q) * S(Q)$ is applied. </p>
<p> References </p>
<p> </p>
<p> .. [#Feigin1987] L A Feigin and D I Svergun, Structure Analysis by Small-Angle X-Ray    and Neutron Scattering, Plenum Press, New York, (1987) .. [#Boucher1983] B Boucher, P Chieux, P Convert, and M Tournarie,    *Metal Physics*, 13,1339 (1983).    </p>
<p> </p>
<p> Authorship and Verification </p>
<p> </p>
<p>**Author:** Jae-Hie Cho **Date:** Nov 1, 2010<br/>**Last Modified by:** Paul Kienzle **Date:** Dec 20, 2016<br/>**Last Reviewed by:** Steve King **Date:** March 29, 2019<br/> </p>
</p>
</div>
<h2>Details:</h2>
<table class="table">
<tr>
<td><strong>Created By</strong></td>
<td><a href="/accounts/user/12/">sasview</a></td>
</tr>
<tr>
<td><strong>Uploaded</strong></td>
<td>Sept. 7, 2017, 3:56 p.m.</td>
</tr>
<tr>
<td><strong>Category</strong></td>
<td>Sphere</td>
</tr>
<tr>
<td><strong>Score</strong></td>
<td>0
        
        </td>
</tr>
<tr>
<td><strong>Verified</strong></td>
<td>
<span class="text-success"><span class="glyphicon glyphicon-ok"></span> Verified by SasView Team on 07 Sep 2017</span>
</td>
</tr>
<tr>
<td><strong>In Library</strong></td>
<td>
            
                This model is included in the SasView library by default
            
        </td>
</tr>
<tr>
<td><strong>Files</strong></td>
<td>
<a href="/uploads/778">spherical_sld.py</a><br>
<a href="/uploads/779">spherical_sld.c</a><br>
</br></br></td>
</tr>
</table>
<h3>Comments:</h3>
<p>
        No comments yet.
    </p>
<p>
        Please log in to add a comment.
    </p>
</div>
</body>
</html>
