
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Core Shell Parallelepiped | SasView Model Marketplace</title>
<link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" rel="stylesheet"/>
<link charset="utf-8" href="/static/marketplace/style.css" rel="stylesheet">
<link href="/static/marketplace/ball.ico" rel="shortcut icon" type="image/x-icon"/>
<script charset="utf-8" src="/static/marketplace/jquery-2.2.4.min.js"></script>
<script crossorigin="anonymous" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script async="" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
</script>
<script type="text/javascript">
    $(function() {
        $('[data-toggle="tooltip"]').tooltip()
    })
    window.MathJax = ({
        elements: ["model-desc"],
        tex2jax: {
            inlineMath: [ ['$', '$'], [ "\\(", "\\)" ] ],
            processEscapes: true
        },
        asciimath2jax: {
            delimiters: [],
        },
        CommonHTML: { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
    });
</script>
</link></head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
<div class="container container-fluid">
<div class="navbar-header">
<button aria-expanded="false" class="navbar-toggle collapsed" data-target="#navbar-collapse-1" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<img src="/static/marketplace/logo.png"/><a class="navbar-brand" href="/">SasView Marketplace</a>
</div>
<div class="collapse navbar-collapse" id="navbar-collapse-1">
<ul class="nav navbar-nav navbar-right">
<li><a href="/accounts/login/"><span class="glyphicon glyphicon-log-in"></span> Log In </a></li>
</ul>
<form action="/search/" class="navbar-form navbar-left" method="get">
<div class="form-group">
<input class="form-control" name="query" placeholder="Search" type="text"/>
</div>
<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
</form>
</div><!-- /.navbar-collapse -->
</div>
</nav>
<div class="container">
<ol class="breadcrumb">
<li><a href="/">Categories</a></li>
<li><a href="/models/parallelepiped/">Parallelepiped</a></li>
<li><a href="/models/67/">Core Shell Parallelepiped</a></li>
</ol>
<h1>Core Shell Parallelepiped</h1>
<h2>Description:</h2>
<div class="container" id="model-desc">
<p>
<p>Definition </p>
<p> </p>
<p> Calculates the form factor for a rectangular solid with a core-shell structure. The thickness and the scattering length density of the shell or "rim" can be different on each (pair) of faces. The three dimensions of the core of the parallelepiped (strictly here a cuboid) may be given in *any* size order as long as the particles are randomly oriented (i.e. take on all possible orientations see notes on 2D below). To avoid multiple fit solutions, especially with Monte-Carlo fit methods, it may be advisable to restrict their ranges. There may be a number of closely similar "best fits", so some trial and error, or fixing of some dimensions at expected values, may help. </p>
<p> The form factor is normalized by the particle volume $V$ such that </p>
<p> $$  I(q) = \frac{\text{scale}}{V} \langle P(q,\alpha,\beta) \rangle + \text{background} <br/>$$<br/>where $\langle \ldots \rangle$ is an average over all possible orientations of the rectangular solid, and the usual $\Delta \rho^2 V^2$ term cannot be pulled out of the form factor term due to the multiple slds in the model. </p>
<p> The core of the solid is defined by the dimensions $A$, $B$, $C$ here shown such that $A &lt; B &lt; C$. </p>
<p> </p>
<p>    Core of the core shell parallelepiped with the corresponding definition    of sides. </p>
<p> </p>
<p> There are rectangular "slabs" of thickness $t_A$ that add to the $A$ dimension (on the $BC$ faces). There are similar slabs on the $AC$ $(=t_B)$ and $AB$ $(=t_C)$ faces. The projection in the $AB$ plane is </p>
<p> </p>
<p>    AB cut through the core-shell parallelipiped showing the cross secion of    four of the six shell slabs. As can be seen, this model leaves **"gaps"**    at the corners of the solid. </p>
<p> </p>
<p> The total volume of the solid is thus given as </p>
<p> $$  V = ABC + 2t_ABC + 2t_BAC + 2t_CAB <br/>$$<br/>The intensity calculated follows the `parallelepiped` model, with the core-shell intensity being calculated as the square of the sum of the amplitudes of the core and the slabs on the edges. The scattering amplitude is computed for a particular orientation of the core-shell parallelepiped with respect to the scattering vector and then averaged over all possible orientations, where $\alpha$ is the angle between the $z$ axis and the $C$ axis of the parallelepiped, and $\beta$ is the angle between the projection of the particle in the $xy$ detector plane and the $y$ axis. </p>
<p> $$  P(q)=\frac {\int_{0}^{\pi/2}\int_{0}^{\pi/2}F^2(q,\alpha,\beta) \ sin\alpha \ d\alpha \ d\beta} {\int_{0}^{\pi/2} \ sin\alpha \ d\alpha \ d\beta} <br/>$$<br/>and </p>
<p> $$  F(q,\alpha,\beta) = (\rho_\text{core}-\rho_\text{solvent}) S(Q_A, A) S(Q_B, B) S(Q_C, C) \\ &amp;+ (\rho_\text{A}-\rho_\text{solvent}) \left[S(Q_A, A+2t_A) - S(Q_A, A)\right] S(Q_B, B) S(Q_C, C) \\ &amp;+ (\rho_\text{B}-\rho_\text{solvent}) S(Q_A, A) \left[S(Q_B, B+2t_B) - S(Q_B, B)\right] S(Q_C, C) \\ &amp;+ (\rho_\text{C}-\rho_\text{solvent}) S(Q_A, A) S(Q_B, B) \left[S(Q_C, C+2t_C) - S(Q_C, C)\right] <br/>$$<br/>with </p>
<p> $$  S(Q_X, L) = L \frac{\sin (\tfrac{1}{2} Q_X L)}{\tfrac{1}{2} Q_X L} <br/>$$<br/>and </p>
<p> $$  Q_A = q \sin\alpha \sin\beta \\ Q_B = q \sin\alpha \cos\beta \\ Q_C = q \cos\alpha <br/>$$</p>
<p> where $\rho_\text{core}$, $\rho_\text{A}$, $\rho_\text{B}$ and $\rho_\text{C}$ are the scattering lengths of the parallelepiped core, and the rectangular slabs of thickness $t_A$, $t_B$ and $t_C$, respectively. $\rho_\text{solvent}$ is the scattering length of the solvent. </p>
<p> .. note:: </p>
<p>    the code actually implements two substitutions: $d(cos\alpha)$ is    substituted for -$sin\alpha d\alpha$ (note that in the    `parallelepiped` code this is explicitly implemented with    $\sigma = cos\alpha$), and $\beta$ is set to $\beta = u \pi/2$ so that    $du = \pi/2 d\beta$.  Thus both integrals go from 0 to 1 rather than 0    to $\pi/2$. </p>
<p> FITTING NOTES ~~~~~~~~~~~~~ </p>
<p> #. There are many parameters in this model. Hold as many fixed as possible with    known values, or you will certainly end up at a solution that is unphysical. </p>
<p> #. The 2nd virial coefficient of the core_shell_parallelepiped is calculated    based on the the averaged effective radius $(=\sqrt{(A+2t_A)(B+2t_B)/\pi})$    and length $(C+2t_C)$ values, after appropriately sorting the three    dimensions to give an oblate or prolate particle, to give an effective radius    for $S(q)$ when $P(q) * S(q)$ is applied. </p>
<p> #. For 2d data the orientation of the particle is required, described using    angles $\theta$, $\phi$ and $\Psi$ as in the diagrams below, where $\theta$    and $\phi$ define the orientation of the director in the laboratory reference    frame of the beam direction ($z$) and detector plane ($x-y$ plane), while    the angle $\Psi$ is effectively the rotational angle around the particle    $C$ axis. For $\theta = 0$ and $\phi = 0$, $\Psi = 0$ corresponds to the    $B$ axis oriented parallel to the y-axis of the detector with $A$ along    the x-axis. For other $\theta$, $\phi$ values, the order of rotations    matters. In particular, the parallelepiped must first be rotated $\theta$    degrees in the $x-z$ plane before rotating $\phi$ degrees around the $z$    axis (in the $x-y$ plane). Applying orientational distribution to the    particle orientation (i.e  `jitter` to one or more of these angles) can get    more confusing as `jitter` is defined **NOT** with respect to the laboratory    frame but the particle reference frame. It is thus highly recommended to    read `orientation` for further details of the calculation and angular    dispersions. </p>
<p> .. note:: For 2d, constraints must be applied during fitting to ensure that the    order of sides chosen is not altered, and hence that the correct definition    of angles is preserved. For the default choice shown here, that means    ensuring that the inequality $A &lt; B &lt; C$ is not violated,  The calculation    will not report an error, but the results may be not correct. </p>
<p> </p>
<p>     Definition of the angles for oriented core-shell parallelepipeds.     Note that rotation $\theta$, initially in the $x-z$ plane, is carried     out first, then rotation $\phi$ about the $z$ axis, finally rotation     $\Psi$ is now around the $C$ axis of the particle. The neutron or X-ray     beam is along the $z$ axis and the detecotr defines the $x-y$ plane. </p>
<p> </p>
<p>     Examples of the angles for oriented core-shell parallelepipeds against the     detector plane. </p>
<p> </p>
<p> Validation </p>
<p> </p>
<p> Cross-checked against hollow rectangular prism and rectangular prism for equal thickness overlapping sides, and by Monte Carlo sampling of points within the shape for non-uniform, non-overlapping sides. </p>
<p> </p>
<p> References </p>
<p> </p>
<p> #. P Mittelbach and G Porod, *Acta Physica Austriaca*, 14 (1961) 185-211    Equations (1), (13-14). (in German) #. D Singh (2009). *Small angle scattering studies of self assembly in    lipid mixtures*, Johns Hopkins University Thesis (2009) 223-225. `Available    from Proquest &lt;http://search.proquest.com/docview/304915826&gt;`_ #.  L. Onsager, *Ann. New York Acad. Sci.*, 51 (1949) 627-659 </p>
<p> Authorship and Verification </p>
<p> </p>
<p>**Author:** NIST IGOR/DANSE **Date:** pre 2010<br/>**Converted to sasmodels by:** Miguel Gonzalez **Date:** February 26, 2016<br/>**Last Modified by:** Paul Kienzle **Date:** October 17, 2017<br/>**Last Reviewed by:** Paul Butler **Date:** May 24, 2018 - documentation<br/>   updated </p>
</p>
</div>
<h2>Details:</h2>
<table class="table">
<tr>
<td><strong>Created By</strong></td>
<td><a href="/accounts/user/12/">sasview</a></td>
</tr>
<tr>
<td><strong>Uploaded</strong></td>
<td>Sept. 7, 2017, 3:56 p.m.</td>
</tr>
<tr>
<td><strong>Category</strong></td>
<td>Parallelepiped</td>
</tr>
<tr>
<td><strong>Score</strong></td>
<td>0
        
        </td>
</tr>
<tr>
<td><strong>Verified</strong></td>
<td>
<span class="text-success"><span class="glyphicon glyphicon-ok"></span> Verified by SasView Team on 07 Sep 2017</span>
</td>
</tr>
<tr>
<td><strong>In Library</strong></td>
<td>
            
                This model is included in the SasView library by default
            
        </td>
</tr>
<tr>
<td><strong>Files</strong></td>
<td>
<a href="/uploads/724">core_shell_parallelepiped.py</a><br>
<a href="/uploads/725">core_shell_parallelepiped.c</a><br>
</br></br></td>
</tr>
</table>
<h3>Comments:</h3>
<p>
        No comments yet.
    </p>
<p>
        Please log in to add a comment.
    </p>
</div>
</body>
</html>
